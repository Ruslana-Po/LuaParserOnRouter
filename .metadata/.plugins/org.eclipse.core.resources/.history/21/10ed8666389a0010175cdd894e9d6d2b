CXX = /home/lana/openwrt-19.07/openwrt-19.07/staging_dir/toolchain-mipsel_24kc_gcc-7.5.0_musl/bin/mipsel-openwrt-linux-musl-g++
CXXFLAGS = -std=c++17 -Wall \
           -I../include \
           -I/home/lana/Table/Lua_Var_Exec/include \
           -I../../Lua_Var_Exec \
           -I/home/lana/Table/googletest/googletest/include 

LDFLAGS = -L/home/lana/Table/googletest/googletest/build/lib \
          -L/home/lana/openwrt-19.07/openwrt-19.07/staging_dir/target-mipsel_24kc_musl/usr/lib \
          -pthread

LDLIBS = -lgtest -lgtest_main -llua -lpthread -lm -ldl

SRC_FILES = ../../Lua_Var_Exec/source/str.cpp \
            ../../Lua_Var_Exec/source/parse_exception.cpp \
            ../../Lua_Var_Exec/source/marks.cpp \
            ../../Lua_Var_Exec/source/tree_node.cpp \
            ../../Lua_Var_Exec/source/tree.cpp \
            ../../Lua_Var_Exec/source/blocks.cpp \
            ../../Lua_Var_Exec/LuaWrapper.cpp

TEST_FILES = strTest.cpp marksTest.cpp parser.cpp tree_test.cpp treeNode_test.cpp blocksTest.cpp test_main.cpp

test_program: 
	$(CXX) $(CXXFLAGS) -o $@ $(SRC_FILES) $(TEST_FILES) $(LDFLAGS) $(LDLIBS)

run: test_program
	./test_program

clean:
	rm -f test_program

.PHONY: run clean